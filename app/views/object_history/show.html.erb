<div class="dri_report_container">

  <h3><%= t('dri.reports.headings.object') %></h3>
  <table>
    <tr><td> <%= t('dri.reports.object.object_id') %> </td><td> <%= @object.noid %> </td></tr>
    <tr><td> <%= t('dri.reports.object.doi') %> </td><td> <%= @object.doi.first %> </td></tr>
    <tr><td> <%= t('dri.reports.object.title') %> </td><td> <%= @object.title.join(' : ') %> </td></tr>
    <tr><td> <%= t('dri.reports.object.created_at') %> </td><td> <%= @object.create_date %> </td></tr>
    <tr><td> <%= t('dri.reports.object.last_mod') %> </td><td> <%= @object.modified_date %> </td></tr>
    <tr><td> <%= t('dri.reports.object.depositor') %> </td><td> <%= @object.depositor.first %> </td></tr>
    <tr><td> <%= t('dri.reports.object.status') %> </td><td> <%= @object.status %> </td></tr>
    <tr><td> <%= t('dri.reports.object.metadata_md5') %> </td><td> <%= @object.metadata_md5.first %> </td></tr>
    <tr><td> <%= t('dri.reports.object.licence') %> </td><td> <%= @licence %> </td></tr>
    <tr><td> <%= t('dri.reports.object.copyright') %> </td><td> <%= @object.rights.join(' : ') %> </td></tr>
  </table>


  <h3><%= t('dri.reports.headings.permissions') %></h3>
  <table>
    <tr><td> <%= t('dri.reports.object.institute_manager') %> </td><td> <%= @permission_info[:institute_manager] %> </td></tr>
    <tr><td> <%= t('dri.reports.object.read_groups') %> </td><td> <%= @permission_info[:read_groups] %> </td></tr>
    <tr><td> <%= t('dri.reports.object.read_users') %> </td><td>
      <% @permission_info[:read_users].each do |user| %>
      <table>
        <tr><td><%= user[0] %></td><td><%= user[1] %></td><td><%= user[2] %></td></tr>
      </table>
      <% end %>
    </td></tr>
    <tr><td> <%= t('dri.reports.object.edit_users') %> </td><td> <%= @permission_info[:edit_users] %>  </td></tr>
    <tr><td> <%= t('dri.reports.object.manage_users') %> </td><td><%= @permission_info[:manager_users] %></td></tr>
  </table>

  <h3><%= t('dri.reports.headings.versions') %></h3>

  <% if @versions.present? %>
    <table>
      <tr>
        <th><%= t('dri.reports.headings.date') %></th>
        <th><%= t('dri.reports.headings.committer') %></th>
        <th><%= t('dri.reports.headings.label') %></th>
    </tr>
    <% @versions.keys.each do |label| %>
       <tr>
        <td><%= @versions[label][:created] %></td>
        <td><%= @versions[label][:committer] %></td>
        <td><%= label %></td>
      </tr>
    <% end %>
    </table>
  <% end %>

  <h3><%= t('dri.reports.headings.files') %></h3>
  <% @object.generic_files.each do |file| %>
    <table>
      <tr><td><%= t('dri.reports.assets.asset_id') %></td><td><%= file.noid %></td></tr>
      <tr><td><%= t('dri.reports.assets.asset_type') %></td><td><%= file.format_label.join(' : ') %></td></tr>
      <tr><td><%= t('dri.reports.assets.file_size') %></td><td><%= number_to_human_size(file.file_size.first.to_i) %></td></tr>
      <tr><td><%= t('dri.reports.assets.last_modified') %></td><td><%= file.last_modified.join(' : ') %></td></tr>
      <tr><td><%= t('dri.reports.assets.checksum_orig') %></td><td><%= file.original_checksum.join(' : ') %></td></tr>
      <tr><td><%= t('dri.reports.assets.file_info_link') %></td><td><%= link_to(object_file_path(@object.noid, file.noid), object_file_path(@object.noid, file.noid)) %></td></tr>
      <tr><td><%= t('dri.reports.assets.file_download_link') %></td><td><%= link_to(file_download_path(@object.noid, file.noid), file_download_path(@object.noid, file.noid)) %></td></tr>


      <tr><td><%= t('dri.reports.assets.surrogates') %></td><td>

        <% @asset_info[file.noid][:surrogates].each do |key,value| %>
          <table>
            <tr><td><%= t('dri.reports.surrogates.name') %></td><td><%= key %></td></tr>
            <tr><td><%= t('dri.reports.surrogates.mime_type') %></td><td><%= value[:content_type] %></td></tr>
            <tr><td><%= t('dri.reports.surrogates.size') %></td><td><%= number_to_human_size(value[:content_length]) %></td></tr>
            <tr><td><%= t('dri.reports.surrogates.hash') %></td><td><%= value[:etag] %></td></tr>
            <tr><td><%= t('dri.reports.surrogates.last_modified') %></td><td><%= value[:last_modified] %></td></tr>
          </table>
        <% end %>
      </td></tr>
    </table>
  <% end %>
</div>
