<% if can? :read, @document %>
  <% get_files @document %>
  
  <% unless @files.empty? %>

    <% @generic_file = @files.first %>

    <div class="dri_asset_holder">

      <% if @generic_file.audio? %>
        <% @surrogate = surrogate_url(@document.id, @generic_file.id, "mp3") %>
        <% unless @surrogate.nil? %>
        <div class="dri_asset_tools">
    		<div class="dri_green_button">
    			<%= link_to t('dri.views.catalog.links.download'), @surrogate, :id => "download_asset", :download => (@document.id).to_s %>
    		</div>
    	</div>
        <% end %>

      <% elsif @generic_file.video? %>
        <% @surrogate = surrogate_url(@document.id, @generic_file.id, "mp4") %>
        <% unless @surrogate.nil? %>
        <div class="dri_asset_tools">
            <div class="dri_green_button">
                <%= link_to t('dri.views.catalog.links.download'), @surrogate, :id => "download_asset", :download => (@document.id).to_s %>
            </div>
        </div>
        <% end %>

      <% elsif @generic_file.pdf? %>
        <%# this isn't right - should be the pdf but that isn't available to anonomous user %>
        <% @surrogate = surrogate_url(@document.id, @generic_file.id, "full_size_web_format") %>
        <% unless @surrogate.nil?  %>
        <div class="dri_asset_tools">
            <div class="dri_green_button">
                <%= link_to t('dri.views.catalog.links.download'), @surrogate, :id => "download_asset", :download => (@document.id).to_s %>
            </div>
        </div>
        <% end %>        

      <% elsif @generic_file.image? %>
              <% @surrogate = surrogate_url(@document.id, @generic_file.id, "full_size_web_format") %>
        <% unless @surrogate.nil? %>
        <div class="dri_asset_tools">
            <div class="dri_green_button">
                <%= link_to t('dri.views.catalog.links.download'), @surrogate, :id => "download_asset", :download => (@document.id).to_s %>
            </div>
        </div>
        <% end %>
      <% end %>

    </div>

  <% end %>

<% end %>
